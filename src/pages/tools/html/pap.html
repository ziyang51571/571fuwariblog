<div class="card-base rounded-xl p-6 text-gray-900 dark:text-gray-100">
    <style>
        /* ==================== 自定义颜色配置区 ==================== */
        :root {
            /* 按钮样式 */
            --btn-bg-light: #ffffff;
            --btn-bg-dark: #1f2937;  /* neutral-800 */
            --btn-border-light: #d1d5db;  /* neutral-300 */
            --btn-border-dark: #374151;   /* neutral-700 */
            
            /* 输入框样式 */
            --input-bg-light: #ffffff;
            --input-bg-dark: #111827;  /* 更深的暗色背景 */
            --input-border-light: #d1d5db;
            --input-border-dark: #1f2937;
            
            /* 勾选框样式 */
            --checkbox-bg-light: #ffffff;
            --checkbox-bg-dark: #374151;  /* neutral-700 */
            
            /* 高亮颜色 */
            --highlight-color: #facc15;  /* yellow-400 */
            
            /* 文字颜色 */
            --text-dark: #111827;  /* 深色文字 */
            --text-light: #f3f4f6; /* 浅色文字 */
        }

        /* 按钮基础样式 */
        .custom-btn {
            background-color: var(--btn-bg-light);
            border-color: var(--btn-border-light);
            color: var(--text-dark);
            transition: all 0.1s;
        }
        .dark .custom-btn {
            background-color: var(--btn-bg-dark);
            border-color: var(--btn-border-dark);
            color: var(--text-light);
        }
        .custom-btn:hover {
            box-shadow: 0 0 0 1px var(--highlight-color);
        }
        .custom-btn:active {
            transform: scale(0.95);
        }

        /* 输入框基础样式 */
        .custom-input {
            background-color: var(--input-bg-light);
            border-color: var(--input-border-light);
            color: var(--text-dark);
        }
        .dark .custom-input {
            background-color: var(--input-bg-dark);
            border-color: var(--input-border-dark);
            color: var(--text-light);
        }
        .custom-input:focus {
            box-shadow: 0 0 0 1px var(--highlight-color);
        }

        /* 勾选框基础样式 */
        .custom-checkbox {
            background-color: var(--checkbox-bg-light);
            border-color: var(--btn-border-light);
        }
        .dark .custom-checkbox {
            background-color: var(--checkbox-bg-dark);
            border-color: var(--btn-border-dark);
        }
    </style>

    <h2 class="text-2xl font-bold mb-4 text-primary">文本筛选器</h2>
    
    <div class="mb-4">
        <label class="block text-sm font-medium mb-2">输入文本：</label>
        <textarea id="inputText" class="w-full h-32 border rounded-lg focus:outline-none p-3 custom-input" placeholder="请在此输入需要筛选的文本..."></textarea>
    </div>
    
    <div class="mb-4">
        <label class="block text-sm font-medium mb-2">选择要提取的内容类型：</label>
        <div id="optionsContainer" class="flex flex-wrap gap-4"></div>
    </div>
    
    <div class="flex gap-3 mb-4" id="buttonsContainer"></div>
    
    <div>
        <label class="block text-sm font-medium mb-2">提取结果：</label>
        <textarea id="outputText" class="w-full h-32 border rounded-lg focus:outline-none p-3 custom-input" readonly placeholder="提取结果将显示在这里..."></textarea>
    </div>
</div>

<script>
    const optionsData = [
        { id: 'chinese', label: '汉字', pattern: /[\u4e00-\u9fa5]/g },
        { id: 'uppercase', label: '大写字母', pattern: /[A-Z]/g },
        { id: 'lowercase', label: '小写字母', pattern: /[a-z]/g },
        { id: 'numbers', label: '数字', pattern: /[0-9]/g },
        { id: 'symbols', label: '符号', pattern: /[^\w\u4e00-\u9fa5\s]/g }
    ];

    const buttonsData = [
        { id: 'clearBtn', label: '清空', variant: 'btn-error' },
        { id: 'copyBtn', label: '复制结果', variant: 'btn-secondary' },
        { id: 'extractBtn', label: '开始提取', variant: 'btn-primary' }
    ];

    function createOptions() {
        const container = document.getElementById('optionsContainer');
        container.innerHTML = '';
        optionsData.forEach(opt => {
            const label = document.createElement('label');
            label.className = 'flex items-center gap-2 cursor-pointer';
            label.innerHTML = `
                <input type="checkbox" id="${opt.id}" class="checkbox checkbox-primary rounded custom-checkbox" checked />
                <span class="text-sm text-base-content">${opt.label}</span>
            `;
            container.appendChild(label);
        });
    }

    function createButtons() {
        const container = document.getElementById('buttonsContainer');
        container.innerHTML = '';
        buttonsData.forEach(btn => {
            const button = document.createElement('button');
            button.id = btn.id;
            button.textContent = btn.label;
            button.className = `btn ${btn.variant} px-4 py-2 border rounded-lg custom-btn focus:outline-none`;
            container.appendChild(button);
        });
    }

    function bindAll() {
        createOptions();
        createButtons();
        
        document.getElementById('clearBtn').addEventListener('click', () => {
            document.getElementById('inputText').value = '';
            document.getElementById('outputText').value = '';
        });

        document.getElementById('copyBtn').addEventListener('click', async () => {
            const output = document.getElementById('outputText').value;
            if (output) {
                await navigator.clipboard.writeText(output);
                alert('已复制到剪贴板！');
            }
        });

        document.getElementById('extractBtn').addEventListener('click', () => {
            const input = document.getElementById('inputText').value;
            if (!input) {
                alert('请先输入文本！');
                return;
            }
            let result = '';
            optionsData.forEach(opt => {
                if (document.getElementById(opt.id).checked) {
                    const matches = input.match(opt.pattern);
                    if (matches) result += matches.join('');
                }
            });
            document.getElementById('outputText').value = result;
        });
    }

    bindAll();
    if (window.swup) window.addEventListener('swup:contentReplaced', bindAll);
</script>
<div class="card-base rounded-xl p-6 text-gray-900 dark:text-gray-100">
  <h2 class="text-xl font-bold mb-4">测试工具</h2>
  <p class="text-base-content/70">可以在下方输入文本，大概没有任何作用...<em>吧?</em></p>
  
  <input id="txt" class="input input-bordered w-full mt-4" placeholder="轻触以键入文本...">
</div>

<script>
const input = document.getElementById('txt');
const UNLOCK_CODE = "Pictured as Perfect";
const RELOCK_CODE = "Therefore never perfect.";
// <em>　　　除非是她的无瑕妙笔...</em>
// very fun-y :]

function bindUnlock() {
  if (!input) return;
  input.removeEventListener('input', handleUnlock);
  input.addEventListener('input', handleUnlock);
}

function handleUnlock(e) {
  const val = e.target.value;
  const unlocked = JSON.parse(localStorage.getItem('UNLOCKED_CARDS') || '[]');
  const isLocked = !unlocked.includes('secret-tool');

  if (val.toUpperCase() === UNLOCK_CODE.toUpperCase() && isLocked) {
    localStorage.setItem('UNLOCKED_CARDS', JSON.stringify(['secret-tool']));
    input.blur();
		setTimeout(() => {
    	alert('A concept became known by you.');
    	setTimeout(() => window.location.href = '/tools/', 1200);
    }, 50)
  } else if (val.toUpperCase() === RELOCK_CODE.substring(0, 23).toUpperCase() && !isLocked) {
    localStorage.removeItem('UNLOCKED_CARDS');
    input.blur();
    setTimeout(() => {
    	alert('Something became alien to you.');
    	setTimeout(() => window.location.href = '/tools/', 1200);
    }, 50)
  }
}

bindUnlock();
if (window.swup) {
  window.addEventListener('swup:contentReplaced', bindUnlock);
}
</script>